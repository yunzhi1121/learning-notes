## 1. SpringBootWebå…¥é—¨

* spring-boot-starter-webï¼šåŒ…å«äº†webåº”ç”¨å¼€å‘æ‰€éœ€è¦çš„å¸¸è§ä¾èµ–ã€‚
* spring-boot-starter-testï¼šåŒ…å«äº†å•å…ƒæµ‹è¯•æ‰€éœ€è¦çš„å¸¸è§ä¾èµ–ã€‚

å®˜æ–¹æä¾›çš„starterï¼šhttps://docs.spring.io/spring-boot/docs/2.7.4/reference/htmlsingle/#using.build-systems.starters

SpringBootWebä¸­æœ‰å†…åµŒTomcatï¼Œä¸éœ€è¦å†é…ç½®Tomcat
![alt text](../0.image/02.Spring/image.png)

### 1.1. ä»€ä¹ˆæ˜¯SPring

å®˜ç½‘ï¼šhttps://spring.io/
![alt text](../0.image/02.Spring/image-4.png)


Springä¸­æœ€åŸºç¡€ã€æœ€æ ¸å¿ƒçš„æ˜¯ `SpringFramework`ï¼Œå…¶ä»–Springå®¶æ—çš„æŠ€æœ¯éƒ½æ˜¯åŸºäº `SpringFramework` çš„ã€‚

`SpringFramework` çš„æ ¸å¿ƒåŠŸèƒ½/ç‰¹ç‚¹ï¼š

* **ä¾èµ–æ³¨å…¥ (DI)**ï¼šé€šè¿‡ IoC (æ§åˆ¶åè½¬) å®¹å™¨ç®¡ç†å¯¹è±¡åŠå…¶ä¾èµ–å…³ç³»

* **é¢å‘åˆ‡é¢ç¼–ç¨‹ (AOP)**ï¼šæ”¯æŒæ¨ªåˆ‡å…³æ³¨ç‚¹çš„æ¨¡å—åŒ–

* **æ•°æ®è®¿é—®æ”¯æŒ**ï¼šç®€åŒ– JDBCã€ORM æ¡†æ¶é›†æˆ

* **äº‹åŠ¡ç®¡ç†**ï¼šå£°æ˜å¼äº‹åŠ¡ç®¡ç†

* **MVC æ¡†æ¶**ï¼šç”¨äºæ„å»º Web åº”ç”¨ç¨‹åº

* **çµæ´»æ€§**ï¼šé«˜åº¦å¯é…ç½®ï¼Œä½†éœ€è¦å¤§é‡ XML æˆ– Java é…ç½®

`SpringFramework` çš„ç¼ºç‚¹ï¼š1. é…ç½®ç¹çï¼›2. å…¥é—¨éš¾åº¦å¤§
æ‰€ä»¥ `SpringBoot` ç®€åŒ–äº†é…ç½®ï¼Œå¯ä»¥å¿«é€Ÿå¼€å‘

## 2. Webç¨‹åºåŸºç¡€

---

### 2.1. ä»€ä¹ˆæ˜¯ Web ç¨‹åºï¼Ÿ

* Web ç¨‹åºæ˜¯ä¸€ç§ **åŸºäºæµè§ˆå™¨/å®¢æˆ·ç«¯ å’Œ æœåŠ¡å™¨ç«¯é€šä¿¡** çš„åº”ç”¨ç¨‹åºã€‚
* å®¢æˆ·ç«¯å‘é€è¯·æ±‚ï¼ŒæœåŠ¡å™¨å¤„ç†å¹¶å“åº”ã€‚
* é€šä¿¡ä½¿ç”¨çš„æ˜¯ **HTTP åè®®ï¼ˆHyperText Transfer Protocolï¼‰**ã€‚

---

### 2.2. HTTP åè®®ç®€ä»‹

#### 2.2.1. HTTP çš„æœ¬è´¨

* æ˜¯ä¸€ç§ **åŸºäºæ–‡æœ¬çš„ã€æ— çŠ¶æ€çš„è¯·æ±‚-å“åº”åè®®**ã€‚
* å®¢æˆ·ç«¯å‘èµ·è¯·æ±‚ï¼ˆRequestï¼‰ï¼ŒæœåŠ¡å™¨è¿”å›å“åº”ï¼ˆResponseï¼‰ã€‚

#### 2.2.2. ä¸€ä¸ªå…¸å‹çš„ HTTP è¯·æ±‚

```
GET /index.html HTTP/1.1
Host: localhost:8080
User-Agent: Mozilla/5.0
Accept: text/html
```

#### 2.2.3. ä¸€ä¸ªå…¸å‹çš„ HTTP å“åº”

```
HTTP/1.1 200 OK
Content-Type: text/html
Content-Length: 1024

<html>
  <body>Hello</body>
</html>
```

---

#### 2.2.4. ç›´æ¥ä½¿ç”¨ HTTP ç¼–ç¨‹çš„å¤æ‚æ€§

* å¿…é¡»æ‰‹åŠ¨ï¼š

  * **ç›‘å¬ç«¯å£**
  * **æ¥æ”¶ Socket æ•°æ®**
  * **è§£æè¯·æ±‚æ ¼å¼ï¼ˆå¦‚ GET /path HTTP/1.1ï¼‰**
  * **è§£æ Headerã€Body**
  * **ç”Ÿæˆå“åº”æ ¼å¼**
* é”™è¯¯å®¹æ˜“å‘ç”Ÿï¼Œä¸æ˜“ç»´æŠ¤ï¼Œå› æ­¤æˆ‘ä»¬ä¸€èˆ¬**ä¸ä¼šæ‰‹å†™è¿™äº›åº•å±‚ç»†èŠ‚**ã€‚

---

#### 2.2.5. ä¸ºä»€ä¹ˆä½¿ç”¨ Web æ¡†æ¶ / å®¹å™¨ï¼Ÿ

* **Tomcatã€Jettyã€Spring Boot** ç­‰å¹³å°ï¼š

  * å¸®æˆ‘ä»¬å°è£…äº†å¯¹ **Socket å’Œ HTTP åè®®çš„è§£æ**
  * æˆ‘ä»¬åªéœ€è¦å†™ä¸šåŠ¡é€»è¾‘ï¼ˆå¦‚ Controllerï¼‰
  * æ›´ä¸“æ³¨äºåŠŸèƒ½å®ç°ï¼Œè€Œä¸æ˜¯åè®®ç»†èŠ‚

---

### 2.3. è‡ªå®šä¹‰ Web æœåŠ¡å™¨

> ç”¨ Java å®ç°ä¸€ä¸ªæœ€ç®€å•çš„ Web æœåŠ¡å™¨ï¼ˆä»…æ”¯æŒ GET / è¯·æ±‚ï¼‰ã€‚

#### 2.3.1. æ ¸å¿ƒæµç¨‹ï¼š

1. åˆ›å»º `ServerSocket`ï¼Œç›‘å¬ç«¯å£
2. æ¥å—å®¢æˆ·ç«¯è¿æ¥ï¼Œå¼€å¯çº¿ç¨‹å¤„ç†
3. è¯»å–å¹¶è§£æ HTTP è¯·æ±‚
4. æ ¹æ®è¯·æ±‚ç”Ÿæˆå“åº”å†…å®¹
5. å†™å› HTTP å“åº”ç»™å®¢æˆ·ç«¯

#### 2.3.2. ç¤ºä¾‹ä»£ç ç®€è¦è¯´æ˜ï¼š

```java
ServerSocket ss = new ServerSocket(8080); // ç›‘å¬ 8080 ç«¯å£
Socket sock = ss.accept(); // æ¥æ”¶å®¢æˆ·ç«¯è¿æ¥
```

**å¤„ç†è¯·æ±‚ä¸å“åº”çš„æ ¸å¿ƒé€»è¾‘ï¼š**

```java
String first = reader.readLine(); // è¯»å–é¦–è¡Œ
if (first.startsWith("GET / HTTP/1.")) {
    // åˆæ³•è¯·æ±‚ï¼Œè¿”å›200 + HTMLé¡µé¢
} else {
    // éæ³•è¯·æ±‚ï¼Œè¿”å›404
}
```

**è¯»å– HTML æ–‡ä»¶ä½œä¸ºå“åº”ä½“ï¼š**

```java
InputStream is = Server.class.getClassLoader().getResourceAsStream("html/a.html");
BufferedReader br = new BufferedReader(new InputStreamReader(is));
```

---

#### 2.3.3. å…³é”®çŸ¥è¯†ç‚¹æ€»ç»“

| åç§°               | è¯´æ˜                    |
| ---------------- | --------------------- |
| `ServerSocket`   | ç”¨äºç›‘å¬ç«¯å£ï¼Œæ¥å—å®¢æˆ·ç«¯è¿æ¥        |
| `Socket`         | è¡¨ç¤ºä¸€ä¸ªè¿æ¥é€šé“ï¼Œè¯»å†™æ•°æ®         |
| `BufferedReader` | è¯»å–å®¢æˆ·ç«¯è¯·æ±‚å†…å®¹             |
| `BufferedWriter` | å‘å®¢æˆ·ç«¯å†™å›å“åº”              |
| `Content-Length` | æŒ‡å®šå“åº”ä½“çš„å­—èŠ‚é•¿åº¦ï¼Œå¿…é¡»æ­£ç¡®       |
| `\r\n`ç©ºè¡Œ         | æ ‡è¯† Header å’Œ Body çš„åˆ†éš”ç‚¹ |

---

#### 2.3.4. å“åº” HTML é¡µé¢æµç¨‹å›¾

```
æµè§ˆå™¨å‘èµ· HTTP è¯·æ±‚
        â†“
ServerSocket æ¥æ”¶è¿æ¥
        â†“
Handler çº¿ç¨‹è¯»å–è¯·æ±‚
        â†“
è¯»å–æœ¬åœ° a.html å†…å®¹
        â†“
å°è£… HTTP å“åº”å¤´å’Œ HTML å†…å®¹
        â†“
å†™å›ç»™æµè§ˆå™¨
        â†“
æµè§ˆå™¨æ¸²æŸ“ HTML é¡µé¢
```

---

#### 2.3.5. è¿™ç§åŸç”Ÿå®ç°çš„å±€é™

* åªæ”¯æŒç®€å•è¯·æ±‚ï¼ˆå¦‚ GET ï¼‰
* ä¸æ”¯æŒ POSTã€å‚æ•°è§£æã€å¤šçº¿ç¨‹æ± ã€é«˜å¹¶å‘
* æ— æ—¥å¿—ã€æ— çƒ­éƒ¨ç½²ã€æ— Servletå®¹å™¨
* ä¸å…·å¤‡ä¼ä¸šçº§èƒ½åŠ›ï¼Œä»…ç”¨äº**å­¦ä¹ åŸç†**

---
### 2.4. WebæœåŠ¡å™¨ï¼šTomcat

**Tomcat**ï¼šApache è½¯ä»¶åŸºé‡‘ä¼šä¸€ä¸ªæ ¸å¿ƒé¡¹ç›®ï¼Œæ˜¯ä¸€ä¸ªå¼€æºå…è´¹çš„è½»é‡çº§WebæœåŠ¡å™¨ï¼Œæ”¯æŒServlet/JSPå°‘é‡JavaEEè§„èŒƒã€‚

**JavaEE**ï¼šJava Enterprise Editionï¼ŒJavaä¼ä¸šç‰ˆã€‚æŒ‡Javaä¼ä¸šçº§å¼€å‘çš„æŠ€æœ¯è§„èŒƒæ€»å’Œã€‚åŒ…å«13é¡¹æŠ€æœ¯è§„èŒƒï¼šJDBCã€JNDIã€EJBã€RMIã€JSPã€Servletã€XMLã€JMSã€Java IDLã€JTSã€JTAã€JavaMailã€JAF

Tomcat ä¹Ÿè¢«ç§°ä¸º Webå®¹å™¨ã€Servletå®¹å™¨ã€‚Servletç¨‹åºéœ€è¦ä¾èµ–äº Tomcatæ‰èƒ½è¿è¡Œ 

å®˜ç½‘ï¼šhttps://tomcat.apache.org/






## 3. è¯·æ±‚ & å“åº”æ³¨è§£
**è¯·æ±‚ï¼ˆHttpServletRequestï¼‰**ï¼šè·å–è¯·æ±‚æ•°æ®
**å“åº”ï¼ˆHttpServletResponseï¼‰**ï¼šè®¾ç½®å“åº”æ•°æ®
**BSæ¶æ„**ï¼šBrowser/Serverï¼Œæµè§ˆå™¨/æœåŠ¡å™¨æ¶æ„æ¨¡å¼ã€‚å®¢æˆ·ç«¯åªéœ€è¦æµè§ˆå™¨ï¼Œåº”ç”¨ç¨‹åºçš„é€»è¾‘å’Œæ•°æ®éƒ½å­˜å‚¨åœ¨æœåŠ¡ç«¯ã€‚ã€ç»´æŠ¤æ–¹ä¾¿ ä½“éªŒä¸€èˆ¬ã€‘
**CSæ¶æ„**ï¼šClient/Serverï¼Œå®¢æˆ·ç«¯/æœåŠ¡å™¨æ¶æ„æ¨¡å¼ã€‚éœ€è¦ä¸‹è½½å®¢æˆ·ç«¯ç¨‹åºã€‚ã€å¼€å‘ã€ç»´æŠ¤éº»çƒ¦ ä½“éªŒä¸é”™ã€‘

![alt text](../0.image/02.Spring/image-1.png)

### 3.1. è¯·æ±‚

![ ](../0.image/02.Spring/image-2.png)

#### 3.1.1. ç®€å•å‚æ•°ã€Servlet API & SpringBootã€‘

1. åŸå§‹æ–¹å¼ï¼ˆServlet API æ–¹å¼ï¼‰
    ```java
    //Controlleræ–¹æ³•å½¢å‚ä¸­å£°æ˜HttpServletRequestå¯¹è±¡
    //è°ƒç”¨å¯¹è±¡çš„getParameter(å‚æ•°å)
    // ç¹çï¼Œæ‰‹åŠ¨ç±»å‹è½¬æ¢
    /*
    æ³¨è§£ä¸æ˜ å°„ï¼š@RequestMapping("/simpleParam") æ˜¯ Spring MVC ä¸­çš„æ³¨è§£
    ç”¨äºå°† /simpleParam è¿™ä¸ªè¯·æ±‚è·¯å¾„æ˜ å°„åˆ°å½“å‰æ–¹æ³• simpleParam ä¸Š
    å½“å®¢æˆ·ç«¯è®¿é—®è¯¥è·¯å¾„æ—¶ï¼Œä¼šæ‰§è¡Œæ­¤æ–¹æ³•ã€‚

    é€šè¿‡ HttpServletRequest è·å–å‰ç«¯ä¼ é€’çš„ name å’Œ age å‚æ•°
    å°† age ä»å­—ç¬¦ä¸²æ‰‹åŠ¨è½¬æ¢ä¸ºæ•´æ•°ç±»å‹ï¼Œç„¶ååœ¨æ§åˆ¶å°æ‰“å°å‚æ•°ä¿¡æ¯ï¼Œæœ€åè¿”å›å­—ç¬¦ä¸² OK 
    ä¸è¿‡è¿™ç§æ–¹å¼å­˜åœ¨ä¸€äº›ä¸è¶³ï¼Œæ¯”å¦‚æ‰‹åŠ¨ç±»å‹è½¬æ¢å¯èƒ½å› å‚æ•°æ ¼å¼é—®é¢˜æŠ›å‡ºå¼‚å¸¸
    */
    @RequestMapping("/simpleParam")
    public String simpleParam(HttpServletRequest request) {
            String name = request.getParameter("name");
            String ageStr = request.getParameter("age");
            int age = Integer.parseInt(ageStr);
            System.out.println(name + " : " + age);
            return "OK";
    }
    ```
2. SpringBootä¸­æ¥æ”¶ç®€å•å‚æ•°
   ```java
    //è¯·æ±‚å‚æ•°åä¸æ–¹æ³•å½¢å‚å˜é‡åç›¸åŒ
    //ä¼šè‡ªåŠ¨è¿›è¡Œç±»å‹è½¬æ¢
    /*
    å‚æ•°æ¥æ”¶ï¼šæ–¹æ³•ç›´æ¥å£°æ˜äº† String name å’Œ Integer age ä½œä¸ºå‚æ•°
    åœ¨ Spring MVC ç¯å¢ƒä¸‹ï¼Œé»˜è®¤ä¼šå°è¯•ä»è¯·æ±‚å‚æ•°ä¸­è·å–å¯¹åº”åç§°ï¼ˆname å’Œ age ï¼‰çš„å€¼
    å¹¶è‡ªåŠ¨è¿›è¡Œç±»å‹è½¬æ¢ï¼ˆæ¯”å¦‚å‰ç«¯ä¼ å­—ç¬¦ä¸²å½¢å¼çš„æ•°å­—ï¼Œå¯è½¬æˆ Integer ç±»å‹ ï¼‰æ¥æ³¨å…¥åˆ°å‚æ•°ä¸­
    */
    @RequestMapping("/simpleParam")
    public String simpleParam(String name, Integer age) {
        System.out.println(name + " : " + age);
        return "OK";
    }
    ```
3. @RequestParamæ³¨è§£ï¼ˆå¦‚æœæ–¹æ³•å½¢å‚åç§°ä¸è¯·æ±‚å‚æ•°åç§°ä¸åŒ¹é…ï¼Œå¯ä»¥ä½¿ç”¨ @RequestParam å®Œæˆæ˜ å°„ï¼‰
   ```java
    //æ–¹æ³•å½¢å‚åç§°ä¸è¯·æ±‚å‚æ•°åç§°ä¸åŒ¹é…ï¼Œé€šè¿‡è¯¥æ³¨è§£å®Œæˆæ˜ å°„
    //è¯¥æ³¨è§£çš„requiredå±æ€§é»˜è®¤æ˜¯trueï¼Œä»£è¡¨è¯·æ±‚å‚æ•°å¿…é¡»ä¼ é€’
    /*
    @RequestParam(name = "name")ï¼šç”¨äºç»‘å®šè¯·æ±‚å‚æ•°
    è¿™é‡ŒæŒ‡å®šå°†è¯·æ±‚ä¸­åä¸º name çš„å‚æ•°å€¼èµ‹ç»™æ–¹æ³•å‚æ•° username ï¼Œå®ç°äº†è¯·æ±‚å‚æ•°åå’Œæ–¹æ³•å‚æ•°åä¸åŒæ—¶çš„ç»‘å®šã€‚
    è€Œ Integer age æ²¡æœ‰æ˜¾å¼åŠ  @RequestParam æ³¨è§£æ—¶ï¼Œåœ¨ Spring MVC ç¯å¢ƒä¸‹ï¼Œé»˜è®¤ä¼šå°è¯•æŒ‰å‚æ•°åï¼ˆage ï¼‰å»è¯·æ±‚ä¸­æŸ¥æ‰¾å¯¹åº”å‚æ•°è¿›è¡Œç»‘å®š ã€‚
    */
    @RequestMapping("/simpleParam")
    public String simpleParam(@RequestParam(name = "name", required = false) String username, Integer age)     {
        System.out.println(username + " : " + age);
        return "OK";
    }
    ```
    `@RequestParam` ä¸­çš„ **requiredå±æ€§é»˜è®¤ä¸ºtrue**ï¼Œä»£è¡¨è¯¥è¯·æ±‚å‚æ•°å¿…é¡»ä¼ é€’ï¼Œå¦‚æœä¸ä¼ é€’å°†æŠ¥é”™ã€‚ å¦‚æœè¯¥å‚æ•°æ˜¯å¯é€‰çš„ï¼Œå¯ä»¥å°†requiredå±æ€§è®¾ç½®ä¸ºfalseã€‚


#### 2.1.2. å®ä½“å‚æ•°

ç®€å•å®ä½“å¯¹è±¡ï¼šè¯·æ±‚å‚æ•°åä¸å½¢å‚å¯¹è±¡å±æ€§åç›¸åŒï¼Œå®šä¹‰POJOæ¥æ”¶å³å¯ï¼ˆå¯ä»¥å®šä¹‰DTOï¼‰

```java
@RequestMapping("/simplePojo")
public String simplePojo(User user){
    System.out.println(user);
    return "OK";
}

public class User {
    private String name;
    private Integer age;
}
```


> POJO æ˜¯ Plain Old Java Object çš„ç¼©å†™ï¼Œä¸­æ–‡å¯è¯‘ä¸º "æ™®é€š Java å¯¹è±¡" æˆ– "ç®€å• Java å¯¹è±¡"
> 
> POJO çš„æ ¸å¿ƒç‰¹æ€§:
> 1. æ— ç‰¹æ®Šç»§æ‰¿æˆ–å®ç°
>       ä¸å¼ºåˆ¶ç»§æ‰¿ç‰¹å®šç±»ï¼ˆå¦‚ EJBã€EntityBean ç­‰ï¼‰æˆ–å®ç°ç‰¹å®šæ¥å£ï¼ˆå¦‚ Serializableã€Remote ç­‰ï¼‰ã€‚
>       ä»…ä¾èµ– Java è¯­è¨€æœ¬èº«çš„åŸºç¡€ç‰¹æ€§ã€‚
> 2. ç§æœ‰å±æ€§ä¸å…¬å…±è®¿é—®æ–¹æ³•
>       é€šè¿‡ private å…³é”®å­—å°è£…å±æ€§ï¼Œæä¾› public çš„ getter/setter æ–¹æ³•è®¿é—®å’Œä¿®æ”¹å±æ€§ã€‚
>       ç¤ºä¾‹ï¼š
>       ```java
>       public class User {
>           private String name;  // ç§æœ‰å±æ€§
>           private Integer age;  // ç§æœ‰å±æ€§
>           
>           public String getName() { return name; }  // getter
>           public void setName(String name) { this.name = name; }  // setter
>           
>           public Integer getAge() { return age; }
>           public void setAge(Integer age) { this.age = age; }
>       }
>       ```
>3. æ— ç‰¹æ®Šä¸šåŠ¡é€»è¾‘
>       é€šå¸¸åªåŒ…å«æ•°æ®å’ŒåŸºæœ¬æ“ä½œï¼ˆå¦‚æ•°æ®éªŒè¯ã€è®¡ç®—å±æ€§å€¼ç­‰ï¼‰ï¼Œä¸æ‰¿æ‹…å¤æ‚ä¸šåŠ¡é€»è¾‘





#### 3.1.2. æ•°ç»„é›†åˆå‚æ•°

1. æ•°ç»„å‚æ•°ï¼šè¯·æ±‚å‚æ•°åä¸å½¢å‚æ•°ç»„åç§°ç›¸åŒä¸”è¯·æ±‚å‚æ•°ä¸ºå¤šä¸ªï¼Œå®šä¹‰æ•°ç»„ç±»å‹å½¢å‚å³å¯æ¥æ”¶å‚æ•°
   ```java
   // è¯·æ±‚å‚æ•°åä¸å½¢å‚ä¸­æ•°ç»„å˜é‡åç›¸åŒï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨æ•°ç»„å°è£…
   // http://localhost:8080/arrayParam?hobby=game&hobby=java

   @RequestMapping("/arrayParam")
   public String arrayParam(String[] hobby) {
       System.out.println(Arrays.toString(hobby));
       return "OK";
   }
   ```

2. é›†åˆå‚æ•°ï¼šè¯·æ±‚å‚æ•°åä¸å½¢å‚é›†åˆåç§°ç›¸åŒä¸”è¯·æ±‚å‚æ•°ä¸ºå¤šä¸ªï¼Œ@RequestParam ç»‘å®šå‚æ•°å…³ç³»
   ```java
   // è¯·æ±‚å‚æ•°åä¸å½¢å‚ä¸­é›†åˆå˜é‡åç›¸åŒï¼Œé€šè¿‡@RequestParamç»‘å®šå‚æ•°å…³ç³»
   // http://localhost:8080/listParam?hobby=game&hobby=java

   @RequestMapping("/listParam")
   public String listParam(@RequestParam List<String> hobby) {
       System.out.println(hobby);
       return "OK";
   }
   ```
#### 3.1.3. æ—¥æœŸå‚æ•°

æ—¥æœŸå‚æ•°ï¼šä½¿ç”¨ `@DateTimeFormat` æ³¨è§£å®Œæˆæ—¥æœŸå‚æ•°æ ¼å¼è½¬æ¢

```java
// http://localhost:8080/dateParam?updateTime=2022-12-1210:00:05
@RequestMapping("/dateParam")
public String dateParam(@DateTimeFormat(pattern = "yyyy-MM-dd HH:mm:ss") LocalDateTime updateTime) {
    System.out.println(updateTime);
    return "OK";
}
```

#### 3.1.4. Jsonå‚æ•°

JSONå‚æ•°ï¼šJSONæ•°æ®é”®åä¸å½¢å‚å¯¹è±¡å±æ€§åç›¸åŒï¼Œå®šä¹‰POJOç±»å‹å½¢å‚å³å¯æ¥æ”¶å‚æ•°ï¼Œéœ€è¦ä½¿ç”¨ `@RequestBody` æ ‡è¯†

```json
{
    "name":"Tom",
    "age":10,
    "address":{
        "province":"beijing",
        "city":"beijing"
    }
}
```

```java
@RequestMapping("/jsonParam")
public String jsonParam(@RequestBody User user){
    System.out.println(user);
    return "OK";
}

public class User {
    private String name;
    private Integer age;
    private Address address;
}

public class Address {
    private String province;
    private String city;
}
```

#### 3.1.5. è·¯å¾„å‚æ•°

è·¯å¾„å‚æ•°ï¼šé€šè¿‡è¯·æ±‚URLç›´æ¥ä¼ é€’å‚æ•°ï¼Œä½¿ç”¨{â€¦}æ¥æ ‡è¯†è¯¥è·¯å¾„å‚æ•°ï¼Œéœ€è¦ä½¿ç”¨ `@PathVariable` è·å–è·¯å¾„å‚æ•°

```java
 // http://localhost:8080/path/1/Tom ç­‰ï¼ˆid å’Œ name ä¸ºè·¯å¾„ä¸­åŠ¨æ€éƒ¨åˆ† ï¼‰

@RequestMapping("/path/{id}/{name}")
public String pathParam2(@PathVariable Integer id, @PathVariable String name) {
    System.out.println(id + " : " + name);
    return "OK";
}
```

#### 3.1.6. ç›¸å…³æ³¨è§£æ€»ç»“

| æ³¨è§£                | ä½œç”¨è¯´æ˜                           | é€‚ç”¨åœºæ™¯                    | ä¸»è¦å±æ€§åŠé»˜è®¤å€¼                                                                                                     |
| ----------------- | ------------------------------ | ----------------------- | ------------------------------------------------------------------------------------------------------------ |
| `@RequestMapping` | å°†è¯·æ±‚è·¯å¾„æ˜ å°„åˆ° Controller æ–¹æ³•         | æ‰€æœ‰ç±»å‹è¯·æ±‚ï¼ˆå¯ç»†åŒ–ä¸º GET/POST ç­‰ï¼‰ | - `value`/`path`ï¼šæ˜ å°„è·¯å¾„<br>- `method`ï¼šæ”¯æŒçš„ HTTP æ–¹æ³•ï¼ˆé»˜è®¤å…¨æ”¯æŒï¼‰                                                       |
| `@RequestParam`   | ç»‘å®šè¯·æ±‚å‚æ•°åˆ°æ–¹æ³•å…¥å‚                    | ç®€å•å‚æ•°ã€æ•°ç»„/é›†åˆå‚æ•°            | - `name`ï¼ˆæˆ– `value`ï¼‰ï¼šè¯·æ±‚å‚æ•°å<br>- `required`ï¼šæ˜¯å¦å¿…éœ€ï¼Œé»˜è®¤ `true`<br>- `defaultValue`ï¼šé»˜è®¤å€¼ï¼Œè‹¥è®¾ç½®åˆ™ `required` è‡ªåŠ¨ä¸º `false` |
| `@DateTimeFormat` | å°†å­—ç¬¦ä¸²æ ¼å¼çš„æ—¥æœŸæ—¶é—´å‚æ•°è½¬ä¸º `java.time` ç±»å‹ | æ¥æ”¶æ—¥æœŸ/æ—¶é—´ç±»å‹å‚æ•°             | - `pattern`ï¼šæ—¥æœŸæ—¶é—´æ ¼å¼æ¨¡æ¿ï¼ˆå¦‚ `"yyyy-MM-dd HH:mm:ss"`ï¼‰                                                              |
| `@RequestBody`    | å°†è¯·æ±‚ä½“ï¼ˆé€šå¸¸ä¸º JSONï¼‰ååºåˆ—åŒ–ä¸º POJO       | æ¥æ”¶ JSON æˆ–å…¶ä»–åª’ä½“ç±»å‹è¯·æ±‚ä½“      | æ—                                                                                                             |
| `@PathVariable`   | ç»‘å®š URL è·¯å¾„ä¸­çš„åŠ¨æ€å ä½ç¬¦åˆ°æ–¹æ³•å…¥å‚          | RESTful é£æ ¼è·¯å¾„å‚æ•°          | - `name`ï¼ˆæˆ– `value`ï¼‰ï¼šå ä½ç¬¦åç§°<br>- `required`ï¼šæ˜¯å¦å¿…éœ€ï¼Œé»˜è®¤ `true`                                                     |


### 3.2. å“åº”

@ResponseBody

ç±»å‹ï¼šæ–¹æ³•æ³¨è§£ã€ç±»æ³¨è§£
ä½ç½®ï¼šControlleræ–¹æ³•ä¸Š/ç±»ä¸Š
ä½œç”¨ï¼š1ï¸âƒ£å°†æ–¹æ³•è¿”å›å€¼ç›´æ¥å“åº”ï¼›2ï¸âƒ£å¦‚æœè¿”å›å€¼ç±»å‹æ˜¯ å®ä½“å¯¹è±¡/é›†åˆ ï¼Œå°†ä¼šè½¬æ¢ä¸ºJSONæ ¼å¼å“åº”

è¯´æ˜ï¼š@RestController = @Controller + @ResponseBody ;

å®šä¹‰ç»Ÿä¸€çš„å“åº”ç»“æœç±»ï¼ˆResultï¼‰

## 4. åˆ†å±‚è§£è€¦

### 4.1. ä¸‰å±‚æ¶æ„

`controller`ï¼šæ§åˆ¶å±‚ï¼Œæ¥æ”¶å‰ç«¯å‘é€çš„è¯·æ±‚ï¼Œå¯¹è¯·æ±‚è¿›è¡Œå¤„ç†ï¼Œå¹¶å“åº”æ•°æ®ã€‚
`service`ï¼šä¸šåŠ¡é€»è¾‘å±‚ï¼Œå¤„ç†å…·ä½“çš„ä¸šåŠ¡é€»è¾‘ã€‚
`dao`ï¼šæ•°æ®è®¿é—®å±‚(Data Access Object)ï¼ˆæŒä¹…å±‚ï¼‰ï¼Œè´Ÿè´£æ•°æ®è®¿é—®æ“ä½œï¼ŒåŒ…æ‹¬æ•°æ®çš„å¢ã€åˆ ã€æ”¹ã€æŸ¥ã€‚

### 4.2. åˆ†å±‚è§£è€¦

å†…èšï¼šè½¯ä»¶ä¸­å„ä¸ªåŠŸèƒ½æ¨¡å—å†…éƒ¨çš„åŠŸèƒ½è”ç³»ã€‚
è€¦åˆï¼šè¡¡é‡è½¯ä»¶ä¸­å„ä¸ªå±‚/æ¨¡å—ä¹‹é—´çš„ä¾èµ–ã€å…³è”çš„ç¨‹åº¦ã€‚
è½¯ä»¶è®¾è®¡åŸåˆ™ï¼šé«˜å†…èšä½è€¦åˆã€‚

ğŸ’¡**è§£è€¦æ“ä½œï¼šæ§åˆ¶åè½¬ + ä¾èµ–æ³¨å…¥**

**æ§åˆ¶åè½¬**ï¼š Inversion Of Controlï¼Œç®€ç§° `IOC`ã€‚å¯¹è±¡çš„åˆ›å»ºæ§åˆ¶æƒç”±ç¨‹åºè‡ªèº«è½¬ç§»åˆ°å¤–éƒ¨ï¼ˆå®¹å™¨ï¼‰ï¼Œè¿™ç§æ€æƒ³ç§°ä¸ºæ§åˆ¶åè½¬ã€‚
**ä¾èµ–æ³¨å…¥**ï¼š Dependency Injectionï¼Œç®€ç§° `DI`ã€‚å®¹å™¨ä¸ºåº”ç”¨ç¨‹åºæä¾›è¿è¡Œæ—¶ï¼Œæ‰€ä¾èµ–çš„èµ„æºï¼Œç§°ä¹‹ä¸ºä¾èµ–æ³¨å…¥ã€‚
**Beanå¯¹è±¡**ï¼šIOCå®¹å™¨ä¸­åˆ›å»ºã€ç®¡ç†çš„å¯¹è±¡ï¼Œç§°ä¹‹ä¸º `bean`ã€‚

>
> ```java
> @RestController
> public class EmpController {
>     // â‘  è¿™é‡Œè‡ªå·± new äº†ä¸€ä¸ª EmpServiceImpl â€”â€” å¼ºä¾èµ–
>     private EmpService empService = new EmpServiceImpl();
> 
>     @RequestMapping("/listEmp")
>     public Result list() {
>         // â‘¡ åªèƒ½è°ƒç”¨å›ºå®šå®ç°ï¼Œä¸”æ§åˆ¶å±‚ç›´æ¥ç®¡ä¸šåŠ¡å±‚çš„åˆ›å»º
>         List<Emp> empList = empService.listEmp();
>         return Result.success(empList);
>     }
> }
> ```
> è¿™æ ·å†™çš„é—®é¢˜åœ¨äºï¼š
> 1. æ§åˆ¶å±‚ï¼ˆControllerï¼‰å’Œä¸šåŠ¡å±‚ï¼ˆServiceï¼‰â€œç»‘â€å¾—å¤ªç´§ï¼Œä»»ä½•æƒ³æ¢ä¸ªå®ç°ï¼ˆæ¯”å¦‚ä» EmpServiceImpl æ¢åˆ° EmpServiceBImplï¼‰ï¼Œéƒ½å¾—æ”¹æºç é‡Œ new çš„é‚£ä¸€è¡Œã€‚
> 2. æµ‹è¯•ä¹Ÿå¾ˆéº»çƒ¦ï¼Œæ²¡æ³•è½»æ¾åœ°â€œå¡â€ä¸€ä¸ªå‡çš„ EmpService è¿›æ¥åšå•å…ƒæµ‹è¯•ã€‚

### 4.3. IOC & DIå…¥é—¨



**æ­¥éª¤**ï¼š
1. **å°† Service å±‚ã€Dao å±‚çš„å®ç°ç±»äº¤ç»™ IOC å®¹å™¨ç®¡ç†**
   åœ¨å®ç°ç±»ä¸ŠåŠ  `@Component`ï¼ˆæˆ–æ›´ç»†åŒ–çš„ `@Service`/`@Repository`ï¼‰æ³¨è§£ï¼ŒSpring å¯åŠ¨æ—¶ä¼šæ‰«æå¹¶å®ä¾‹åŒ–å®ƒä»¬ã€‚

2. **åœ¨éœ€è¦ç”¨åˆ°ä¾èµ–çš„åœ°æ–¹æ³¨å…¥å¯¹è±¡**
   åœ¨ Controllerã€Service ç­‰ç±»çš„å­—æ®µã€æ„é€ å™¨æˆ– `setter` ä¸ŠåŠ  `@Autowired`ï¼Œå‘Šè¯‰ Spring â€œè¯·ç»™æˆ‘æ³¨å…¥ä¸€ä¸ªè¯¥ç±»å‹çš„ Beanâ€ã€‚

3. **è¿è¡Œå¹¶éªŒè¯**
   å¯åŠ¨ Spring Boot åº”ç”¨åï¼Œè®¿é—® Controller çš„ URLï¼Œè§‚å¯Ÿä¾èµ–æ˜¯å¦æ­£ç¡®æ³¨å…¥ï¼Œä»¥åŠé€»è¾‘æ˜¯å¦æŒ‰é¢„æœŸæ‰§è¡Œã€‚

**ç¤ºä¾‹ä»£ç **

1ï¸âƒ£**å®šä¹‰æ¥å£**

```java
public interface EmpService {
    List<Emp> listEmp();
}
```

2ï¸âƒ£**ä¸¤ä¸ªå®ç°ç±»ï¼Œäº¤ç»™å®¹å™¨ç®¡ç†**

```java
// Bean åç§°ä¸º "empServiceA"
@Service("empServiceA")
public class EmpServiceA implements EmpService {
    @Override
    public List<Emp> listEmp() {
        // A å®ç°çš„é€»è¾‘
        System.out.println("è°ƒç”¨ A å®ç°");
        return Collections.emptyList();
    }
}

// Bean åç§°ä¸º "empServiceB"
@Service("empServiceB")
public class EmpServiceB implements EmpService {
    @Override
    public List<Emp> listEmp() {
        // B å®ç°çš„é€»è¾‘
        System.out.println("è°ƒç”¨ B å®ç°");
        return Collections.emptyList();
    }
}
```

> **è¯´æ˜**ï¼š
>
> * `@Service` æœ¬è´¨ä¸Šç­‰åŒäº `@Component`ï¼Œåªæ˜¯è¯­ä¹‰æ›´æ˜ç¡®ã€å¯è¯»æ€§æ›´å¥½
> * `("empServiceA")` è¿™ä¸²åå­—å°±æ˜¯ Bean çš„ `id`ï¼Œä¸å†™æ—¶é»˜è®¤æ˜¯ç±»åé¦–å­—æ¯å°å†™ (`empServiceA`)

3ï¸âƒ£**Controller ä¸­æ³¨å…¥å¹¶ä½¿ç”¨**

```java
@RestController
@RequestMapping("/emp")
public class EmpController {

    // æ³¨å…¥æ—¶æŒ‡å®šè¦ç”¨å“ªä¸ª Bean
    @Autowired
    @Qualifier("empServiceA")   // æ”¹æˆ "empServiceB" å°±ä¼šç”¨ B å®ç°
    private EmpService empService;

    @GetMapping("/list")
    public Result list() {
        List<Emp> list = empService.listEmp();
        return Result.success(list);
    }
}
```

* **åˆ‡æ¢å®ç°**ï¼š

  * ç”¨ Aï¼š`@Qualifier("empServiceA")`
  * ç”¨ Bï¼š`@Qualifier("empServiceB")`
    åˆ‡æ¢æ—¶åªè¦æ”¹æ³¨è§£ï¼Œä¸æ”¹ Controller é‡Œå…¶å®ƒä»£ç ã€‚


### 4.4. IOCè¯¦è§£

#### 4.4.1. Beançš„å£°æ˜

è¦æŠŠæŸä¸ªå¯¹è±¡äº¤ç»™IOCå®¹å™¨ç®¡ç†ï¼Œéœ€è¦åœ¨å¯¹åº”çš„ç±»ä¸ŠåŠ ä¸Šå¦‚ä¸‹æ³¨è§£ä¹‹ä¸€

æ³¨è§£ | è¯´æ˜ | ä½ç½®
------- | ------- | -------
@Component | å£°æ˜beançš„åŸºç¡€æ³¨è§£ | ä¸å±äºä»¥ä¸‹ä¸‰ç±»æ—¶ï¼Œç”¨æ­¤æ³¨è§£
@Controller | @Componentçš„è¡ç”Ÿæ³¨è§£ | æ ‡æ³¨åœ¨æ§åˆ¶å™¨ç±»ä¸Š
@Service | @Componentçš„è¡ç”Ÿæ³¨è§£ | æ ‡æ³¨åœ¨ä¸šåŠ¡ç±»ä¸Š
@Repository | @Componentçš„è¡ç”Ÿæ³¨è§£ | æ ‡æ³¨åœ¨æ•°æ®è®¿é—®ç±»ä¸Šï¼ˆç”±äºä¸mybatisæ•´åˆï¼Œç”¨çš„å°‘ï¼‰


* å£°æ˜beançš„æ—¶å€™ï¼Œå¯ä»¥é€šè¿‡valueå±æ€§æŒ‡å®šbeançš„åå­—ï¼Œå¦‚æœæ²¡æœ‰æŒ‡å®šï¼Œé»˜è®¤ä¸ºç±»åé¦–å­—æ¯å°å†™ã€‚
* ä½¿ç”¨ä»¥ä¸Šå››ä¸ªæ³¨è§£éƒ½å¯ä»¥å£°æ˜beanï¼Œä½†æ˜¯åœ¨springbooté›†æˆwebå¼€å‘ä¸­ï¼Œå£°æ˜æ§åˆ¶å™¨beanåªèƒ½ç”¨@Controllerã€‚

#### 4.4.2. Beanç»„ä»¶æ‰«æ

å‰é¢å£°æ˜beançš„å››å¤§æ³¨è§£ï¼Œè¦æƒ³ç”Ÿæ•ˆï¼Œè¿˜éœ€è¦è¢«ç»„ä»¶æ‰«ææ³¨è§£ `@ComponentScan` æ‰«æã€‚

`@ComponentScan` æ³¨è§£è™½ç„¶æ²¡æœ‰æ˜¾å¼é…ç½®ï¼Œä½†æ˜¯å®é™…ä¸Šå·²ç»åŒ…å«åœ¨äº†å¯åŠ¨ç±»å£°æ˜æ³¨è§£ `@SpringBootApplication` ä¸­ï¼Œé»˜è®¤æ‰«æçš„èŒƒå›´æ˜¯å¯åŠ¨ç±»æ‰€åœ¨åŒ…åŠå…¶å­åŒ…ã€‚

ä¸æ¨èæ·»åŠ  `@ComponentScan` æ³¨è§£ï¼Œè¦æŠŠæ‰€æœ‰å†…å®¹æ”¾åœ¨å¯åŠ¨ç±»æ‰€åœ¨åŒ…åŠå…¶å­åŒ…ä¸­ã€‚

![alt text](../0.image/02.Spring/image-3.png)


### 4.5. DIè¯¦è§£

#### 4.5.1. Beanæ³¨å…¥

`@Autowired` æ³¨è§£ï¼Œé»˜è®¤æ˜¯æŒ‰ç…§ç±»å‹è¿›è¡Œï¼Œå¦‚æœå­˜åœ¨å¤šä¸ªç›¸åŒç±»å‹çš„beanï¼Œå°†ä¼šæŠ¥é”™

é€šè¿‡ä»¥ä¸‹å‡ ç§æ–¹æ¡ˆæ¥è§£å†³ï¼š
1. `@Primary` / `@Qualifier`
2. `@Resource`

`@Autowired` æ˜¯springæ¡†æ¶æä¾›çš„æ³¨è§£ï¼Œè€Œ `@Resource` æ˜¯JDKæä¾›çš„æ³¨è§£ã€‚
`@Autowired` é»˜è®¤æ˜¯æŒ‰ç…§ç±»å‹æ³¨å…¥ï¼Œè€Œ `@Resource` é»˜è®¤æ˜¯æŒ‰ç…§åç§°æ³¨å…¥ã€‚


## é…ç½®æ–‡ä»¶

### é…ç½®å‚æ•°

**é—®é¢˜åˆ†æ**ï¼šå‚æ•°ç¡¬ç¼–ç ï¼Œåˆ†æ•£ä¸å¥½ç®¡ç†

**è§£å†³æ–¹æ³•**ï¼š
1. æŠŠå‚æ•°å†™å…¥é…ç½®æ–‡ä»¶ `application.properties`
> å› ä¸ºapplication.propertiesæ˜¯springbooté¡¹ç›®é»˜è®¤çš„é…ç½®æ–‡ä»¶ï¼Œæ‰€ä»¥springbootç¨‹åºåœ¨å¯åŠ¨æ—¶ä¼šé»˜è®¤è¯»å–application.propertiesé…ç½®æ–‡ä»¶

2. ä½¿ç”¨ `@Value` æ³¨è§£ï¼ˆç”¨äºå¤–éƒ¨é…ç½®çš„å±æ€§æ³¨å…¥ï¼‰
> å…·ä½“ç”¨æ³•ä¸ºï¼š `@Value("${é…ç½®æ–‡ä»¶ä¸­çš„key}")`

ç¤ºä¾‹ï¼š

- åŸä»£ç 
    ```java
    @Component
    public class AliOSSUtils {
        private String endpoint = "https://oss-cn-hangzhou.aliyuncs.com";
        private String accessKeyId = "LTAI4GCH1vX6DKqJWxd6nEuW";
        private String accessKeySecret = "yBshYweHOpgDuhCArrVHwiBKpyqSL";
        private String bucketName = "web-tlias";
        //çœç•¥å…¶ä»–ä»£ç ...
    }
    ```
- ä¿®æ”¹å
    ```properties
    #è‡ªå®šä¹‰çš„é˜¿é‡Œäº‘ossé…ç½®ä¿¡æ¯
    aliyun.oss.endpoint=https://oss-cn-hangzhou.aliyuncs.com
    aliyun.oss.accessKeyId=LTAI4GCH1vX6DKqJWxd6nEuW
    aliyun.oss.accessKeySecret=yBshYweHOpqDuhCArrVHwiBKpyqSL
    aliyun.oss.bucketName=web-tlias
    ```
    ```java
    @Component
    public class AliOSSUtils {

        @Value("${aliyun.oss.endpoint}")
        private String endpoint;

        @Value("${aliyun.oss.accessKeyId}")
        private String accessKeyId;

        @Value("${aliyun.oss.accessKeySecret}")
        private String accessKeySecret;

        @Value("${aliyun.oss.bucketName}")
        private String bucketName;
        //çœç•¥å…¶ä»–ä»£ç ...
    }
    ```

### ymlé…ç½®æ–‡ä»¶

SpringBoot æ”¯æŒå¤šç§é…ç½®æ–‡ä»¶æ ¼å¼ï¼Œå¦‚ï¼špropertiesã€xmlã€ymlç­‰
![alt text](../0.image/02.SpringBoot/image.png)

yml æ ¼å¼çš„é…ç½®æ–‡ä»¶ï¼Œåç¼€åæœ‰ä¸¤ç§ï¼š
* yml ï¼ˆæ¨èï¼‰
* yaml

#### ymlåŸºæœ¬è¯­æ³•

- å¤§å°å†™æ•æ„Ÿ  
- æ•°å€¼å‰è¾¹å¿…é¡»æœ‰ **ç©ºæ ¼** ï¼Œä½œä¸ºåˆ†éš”ç¬¦  
- ä½¿ç”¨ç¼©è¿›è¡¨ç¤ºå±‚çº§å…³ç³»ï¼Œç¼©è¿›æ—¶ï¼Œä¸å…è®¸ä½¿ç”¨Tabé”®ï¼Œåªèƒ½ç”¨ç©ºæ ¼ï¼ˆideaä¸­ä¼šè‡ªåŠ¨å°†Tabè½¬æ¢ä¸ºç©ºæ ¼ï¼‰  
- ç¼©è¿›çš„ç©ºæ ¼æ•°ç›®ä¸é‡è¦ï¼Œåªè¦ç›¸åŒå±‚çº§çš„å…ƒç´ å·¦ä¾§å¯¹é½å³å¯  
- `#` è¡¨ç¤ºæ³¨é‡Šï¼Œä»è¿™ä¸ªå­—ç¬¦ä¸€ç›´åˆ°è¡Œå°¾ï¼Œéƒ½ä¼šè¢«è§£æå™¨å¿½ç•¥

![alt text](../0.image/02.SpringBoot/image-1.png)

#### ymlæ•°æ®æ ¼å¼

æœ€å¸¸è§çš„ä¸¤ç±»
1. å®šä¹‰ å¯¹è±¡/Mapé›†åˆ
2. å®šä¹‰ æ•°ç»„/list/seté›†åˆ

**å¯¹è±¡/Mapé›†åˆ**

```yml
user
  name: zhangsan
  age: 18
  address: beijing
```

**æ•°ç»„/list/seté›†åˆ**
```yml
hobby:
  - java
  - game
  - sport
```

###  `@ConfigurationProperties`

- `@Value` æ³¨è§£åªèƒ½ä¸€ä¸ªä¸€ä¸ªçš„è¿›è¡Œå¤–éƒ¨å±æ€§çš„æ³¨å…¥ã€‚  
- `@ConfigurationProperties` å¯ä»¥æ‰¹é‡çš„å°†å¤–éƒ¨çš„å±æ€§é…ç½®æ³¨å…¥åˆ°beanå¯¹è±¡çš„å±æ€§ä¸­ã€‚

æ–¹æ³•ï¼š
1. åˆ›å»ºä¸€ä¸ªå®ä½“ç±»ï¼Œä¸” **å®ä½“ç±»ä¸­çš„å±æ€§å** å’Œ **é…ç½®æ–‡ä»¶ä¸­keyçš„åå­—** å¿…é¡»è¦ä¸€è‡´
2. éœ€è¦å°†å®ä½“ç±»äº¤ç»™Springçš„IOCå®¹å™¨ç®¡ç†ï¼Œæˆä¸ºIOCå®¹å™¨å½“ä¸­çš„beanå¯¹è±¡
3. åœ¨å®ä½“ç±»ä¸Šæ·»åŠ  `@ConfigurationProperties` æ³¨è§£ï¼Œå¹¶é€šè¿‡ `perfix` å±æ€§æ¥æŒ‡å®šé…ç½®å‚æ•°é¡¹çš„å‰ç¼€
![alt text](../0.image/02.SpringBoot/image-2.png)

> å¼•å…¥ä¸€ä¸ªä¾èµ–å¯ä»¥æ¶ˆé™¤çº¢è‰²è­¦å‘Š `Spring Boot Configuration Annotation Processor not configured`
> è¿™é¡¹ä¾èµ–å®ƒçš„ä½œç”¨å°±æ˜¯ä¼šè‡ªåŠ¨çš„è¯†åˆ«è¢« `@Configuration Properties` æ³¨è§£æ ‡è¯†çš„beanå¯¹è±¡

```xml
<dependency>
    <groupId>org.springframework.boot</groupId>
    <artifactId>spring-boot-configuration-processor</artifactId>
</dependency>
```

## ç™»å½•æ¨¡å—

### ç™»å½•æ ¡éªŒå®ç°

å› ä¸ºHTTPåè®®æ˜¯æ— çŠ¶æ€çš„ï¼Œæ‰€ä»¥ä¸‹ä¸€æ¬¡è¯·æ±‚ä¸ä¼šæºå¸¦ä¸Šä¸€æ¬¡è¯·æ±‚çš„æ•°æ®ï¼Œè§£å†³æ–¹æ³•ä¸ºä»¥ä¸‹ä¸¤æ­¥
1. åœ¨å‘˜å·¥ç™»å½•æˆåŠŸåï¼Œéœ€è¦å°†ç”¨æˆ·ç™»å½•æˆåŠŸçš„ä¿¡æ¯å­˜èµ·æ¥ï¼Œè®°å½•ç”¨æˆ·å·²ç»ç™»å½•æˆåŠŸçš„æ ‡è®°ã€‚ã€ä¼šè¯æŠ€æœ¯ã€‘
2. åœ¨æµè§ˆå™¨å‘èµ·è¯·æ±‚æ—¶ï¼Œéœ€è¦åœ¨æœåŠ¡ç«¯è¿›è¡Œç»Ÿä¸€æ‹¦æˆªï¼Œæ‹¦æˆªåè¿›è¡Œç™»å½•æ ¡éªŒã€‚ã€ç»Ÿä¸€æ‹¦æˆªæŠ€æœ¯ã€‘
   - Servlet è§„èŒƒä¸­çš„ Filterè¿‡æ»¤å™¨
   - Spring æä¾›çš„ Interceptoræ‹¦æˆªå™¨

![alt text](../0.image/02.SpringBoot/image-3.png)

### ä¼šè¯æŠ€æœ¯

åœ¨webå¼€å‘å½“ä¸­ï¼Œä¼šè¯æŒ‡çš„å°±æ˜¯æµè§ˆå™¨ä¸æœåŠ¡å™¨ä¹‹é—´çš„ä¸€æ¬¡è¿æ¥ï¼Œæˆ‘ä»¬å°±ç§°ä¸ºä¸€æ¬¡ä¼šè¯ã€‚

**ä¼šè¯ï¼š**ç”¨æˆ·æ‰“å¼€æµè§ˆå™¨ï¼Œè®¿é—®webæœåŠ¡å™¨çš„èµ„æºï¼Œä¼šè¯å»ºç«‹ï¼Œç›´åˆ°æœ‰ä¸€æ–¹æ–­å¼€è¿æ¥ï¼Œä¼šè¯ç»“æŸã€‚åœ¨ä¸€æ¬¡ä¼šè¯ä¸­å¯ä»¥åŒ…å«å¤šæ¬¡è¯·æ±‚å’Œå“åº”ã€‚

**ä¼šè¯è·Ÿè¸ªï¼š**ä¸€ç§ç»´æŠ¤æµè§ˆå™¨çŠ¶æ€çš„æ–¹æ³•ï¼ŒæœåŠ¡å™¨éœ€è¦è¯†åˆ«å¤šæ¬¡è¯·æ±‚æ˜¯å¦æ¥è‡ªäºåŒä¸€æµè§ˆå™¨ï¼Œä»¥ä¾¿åœ¨åŒä¸€æ¬¡ä¼šè¯çš„å¤šæ¬¡è¯·æ±‚é—´å…±äº«æ•°æ®ã€‚

**ä¼šè¯è·Ÿè¸ªæ–¹æ¡ˆï¼š**
* å®¢æˆ·ç«¯ä¼šè¯è·Ÿè¸ªæŠ€æœ¯ï¼šCookie
* æœåŠ¡ç«¯ä¼šè¯è·Ÿè¸ªæŠ€æœ¯ï¼šSession
* ä»¤ç‰ŒæŠ€æœ¯

#### æ–¹æ¡ˆ1ï¼šCookie

**æ•°æ®å­˜å‚¨åœ¨å®¢æˆ·ç«¯æµè§ˆå™¨å½“ä¸­**

- æœåŠ¡å™¨ä¼š **è‡ªåŠ¨** çš„å°† cookie å“åº”ç»™æµè§ˆå™¨ã€‚  
- æµè§ˆå™¨æ¥æ”¶åˆ°å“åº”å›æ¥çš„æ•°æ®ä¹‹åï¼Œä¼š **è‡ªåŠ¨** çš„å°† cookie å­˜å‚¨åœ¨æµè§ˆå™¨æœ¬åœ°ã€‚  
- åœ¨åç»­çš„è¯·æ±‚å½“ä¸­ï¼Œæµè§ˆå™¨ä¼š **è‡ªåŠ¨** çš„å°† cookie æºå¸¦åˆ°æœåŠ¡å™¨ç«¯ã€‚

**ä¸ºä»€ä¹ˆéƒ½æ˜¯è‡ªåŠ¨è¿›è¡Œçš„ï¼Ÿ**

æ˜¯å› ä¸º cookie å®ƒæ˜¯ HTTP åè®®å½“ä¸­æ‰€æ”¯æŒçš„æŠ€æœ¯ï¼Œè€Œå„å¤§æµè§ˆå™¨å‚å•†éƒ½æ”¯æŒäº†è¿™ä¸€æ ‡å‡†ã€‚åœ¨ HTTP åè®®å®˜æ–¹ç»™æˆ‘ä»¬æä¾›äº†ä¸€ä¸ªå“åº”å¤´å’Œè¯·æ±‚å¤´ï¼š

- å“åº”å¤´ Set-Cookie ï¼šè®¾ç½® Cookie æ•°æ®çš„  
- è¯·æ±‚å¤´ Cookie: æºå¸¦ Cookie æ•°æ®çš„

**ä¼˜ç¼ºç‚¹ï¼š**
- **ä¼˜ç‚¹:** HTTPåè®®ä¸­æ”¯æŒçš„æŠ€æœ¯ (åƒSet-Cookie å“åº”å¤´çš„è§£æä»¥åŠ Cookie è¯·æ±‚å¤´æ•°æ®çš„æºå¸¦ï¼Œéƒ½æ˜¯æµè§ˆå™¨è‡ªåŠ¨è¿›è¡Œçš„ï¼Œæ˜¯æ— éœ€æˆ‘ä»¬æ‰‹åŠ¨æ“ä½œçš„)  
- **ç¼ºç‚¹:**  
  - ç§»åŠ¨ç«¯APP(Androidã€IOS)ä¸­æ— æ³•ä½¿ç”¨Cookie  
  - ä¸å®‰å…¨ï¼Œç”¨æˆ·å¯ä»¥è‡ªå·±ç¦ç”¨Cookie  
  - Cookieä¸èƒ½è·¨åŸŸ
>   **è·¨åŸŸ**ï¼šè·¨åŸŸåŒºåˆ†ä¸‰ä¸ªç»´åº¦ï¼ˆåè®® / ip / ç«¯å£ï¼‰åªè¦ä¸Šè¿°çš„ä¸‰ä¸ªç»´åº¦æœ‰ä»»ä½•ä¸€ä¸ªç»´åº¦ä¸åŒï¼Œé‚£å°±æ˜¯è·¨åŸŸæ“ä½œ
> **å‰åç«¯åˆ†ç¦»** çš„é¡¹ç›®ï¼Œå‰ç«¯å’Œåç«¯çš„æœåŠ¡å™¨ä¸€èˆ¬ä¼šåˆ†å¼€éƒ¨ç½²ï¼Œå‰ç«¯å’Œåç«¯çš„IPåœ°å€å’Œç«¯å£å·éƒ½ä¸åŒï¼ˆæ¯”å¦‚å‰ç«¯åœ¨ `192.168.150.200:80`ï¼Œåç«¯åœ¨ `192.168.150.100:8080`ï¼‰


#### æ–¹æ¡ˆ2ï¼šSession



### JWTä»¤ç‰Œ

### Filterè¿‡æ»¤å™¨

### Interceptoræ‹¦æˆªå™¨
